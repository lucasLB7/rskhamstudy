<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Quiz</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"/>
  <link rel="icon" type="image/png" href="{{ url_for('static', filename='favicon.png') }}">
</head>
<body class="bg-light">
  <div class="container mt-4">
    <div class="card shadow-lg p-4 rounded-4">
      <!-- Top bar: Home (left) • End session (right, subtle) -->
      <div class="d-flex justify-content-between align-items-center mb-2">
        <a href="{{ url_for('index') }}" class="btn btn-sm btn-outline-secondary">
          🏠 Home
        </a>
        <small class="text-muted">
          <a href="{{ url_for('summary') }}" class="btn btn-outline-danger btn-sm">End session</a>
        </small>
      </div>

      <!-- Title row -->
      <div class="d-flex justify-content-between align-items-center mb-2">
        <div>
          {% if session.get('mode') == 'study' %}
            <h1 class="h4 text-success mb-0">🎯 Study Mode</h1>
          {% else %}
            <h1 class="h4 text-warning mb-0">📝 Exam Mode</h1>
          {% endif %}
        </div>
        <div class="text-muted">Question {{ number }} of {{ total }}</div>
      </div>

      {% if repeat %}
      <div class="alert alert-warning mt-2">
        Note: You missed this question earlier.
      </div>
      {% endif %}

      <h4 class="mt-3 mb-3">{{ q.question }}</h4>
      <form method="POST">
        <!-- IMPORTANT: name="answer" must match main.py (request.form.get('answer')) -->
        {% for option in options %}
        <div class="form-check my-2">
          <input class="form-check-input" type="radio" name="answer" id="opt{{ loop.index }}" value="{{ option }}" required>
          <label class="form-check-label" for="opt{{ loop.index }}">{{ option }}</label>
        </div>
        {% endfor %}

        <!-- Centered submit -->
        <div class="mt-4 text-center">
          <button class="btn btn-primary btn-lg px-5" type="submit">Submit</button>
        </div>
      </form>

      <!-- Optional feedback badge (if you want to surface last result) -->
      {% if feedback %}
        {% set status, info = feedback %}
        <div class="text-center mt-3">
          {% if status == 'correct' %}
            <span class="badge bg-success">Correct</span>
          {% else %}
            <span class="badge bg-danger">Wrong</span>
            <small class="text-muted ms-2">Correct answer: <strong>{{ info }}</strong></small>
          {% endif %}
        </div>
      {% endif %}
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
