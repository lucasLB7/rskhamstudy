{% extends "base.html" %}
{% block title %}Admin â€¢ {{ 'Edit' if user else 'New' }} User{% endblock %}
{% block content %}
  <h3>{{ 'Edit' if user else 'New' }} User</h3>

  <form method="post" class="card p-3 shadow-sm">
    <div class="row g-3">
      <div class="col-md-6">
        <label class="form-label">Name</label>
        <input name="name" class="form-control" value="{{ user.name if user else '' }}">
      </div>

      <div class="col-md-6">
        <label class="form-label">Email</label>
        <input name="email" type="email" class="form-control"
               value="{{ user.email if user else '' }}" {% if not user %}required{% endif %}>
      </div>

      <div class="col-md-6">
        <label class="form-label">Level</label>
        <select name="level" class="form-select">
          <option value="" {{ 'selected' if (not user or not user.level) else '' }}>(none)</option>
          {% for L in ['Foundation','Intermediary','Full licence'] %}
            <option value="{{L}}" {% if user and user.level==L %}selected{% endif %}>{{L}}</option>
          {% endfor %}
        </select>
      </div>

      <div class="col-md-6">
        <label class="form-label">{{ 'New password (leave blank to keep)' if user else 'Password' }}</label>
        <input name="password" type="password" class="form-control" {% if not user %}required{% endif %}>
      </div>

      <div class="col-12 form-check ms-2">
        <input id="is_admin" name="is_admin" class="form-check-input" type="checkbox"
               {% if user and user.is_admin %}checked{% endif %}>
        <label for="is_admin" class="form-check-label">Admin</label>
      </div>
    </div>

    <div class="mt-3">
      <button class="btn btn-primary">Save</button>
      <a class="btn btn-link" href="{{ url_for('admin_users') }}">Cancel</a>
    </div>
  </form>
{% endblock %}
