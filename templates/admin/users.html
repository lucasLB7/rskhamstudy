{% extends "base.html" %}
{% block title %}Admin • Users{% endblock %}
{% block content %}
  <div class="d-flex justify-content-between align-items-center mb-3">
    <h3>Users</h3>
    <a class="btn btn-primary btn-sm" href="{{ url_for('admin_users_new') }}">+ New user</a>
  </div>
  <table class="table table-sm table-striped align-middle">
    <thead>
      <tr><th>ID</th><th>Name</th><th>Email</th><th>Level</th><th>Admin</th><th class="text-end">Actions</th></tr>
    </thead>
    <tbody>
      {% for u in users %}
      <tr>
        <td>{{ u.id }}</td>
        <td>{{ u.name or '-' }}</td>
        <td>{{ u.email }}</td>
        <td>{{ u.level or '-' }}</td>
        <td>{{ '✓' if u.is_admin else '' }}</td>
        <td class="text-end text-nowrap">
          <a class="btn btn-sm btn-outline-secondary" href="{{ url_for('admin_users_edit', uid=u.id) }}">Edit</a>
          <form method="post" action="{{ url_for('admin_users_delete', uid=u.id) }}" style="display:inline"
                onsubmit="return confirm('Delete {{ u.email }}?')">
            <button class="btn btn-sm btn-outline-danger">Delete</button>
          </form>
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
{% endblock %}
